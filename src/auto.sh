#!/bin/bash

# ==============================================
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞ terrain_navigator
#
# –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
# 1. –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ: 
#    chmod +x auto.sh
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
#    ./auto.sh
# 
# –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
# - g++ (–¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ C++ –∫–æ–¥–∞)
# - —Ñ–∞–π–ª commands.txt —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
# ==============================================

# 1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
echo "üîß –ö–æ–º–ø–∏–ª—è—Ü–∏—è copy12.cpp..."
g++ -std=c++17 copy12.cpp -o terrain_navigator

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
# $? —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã
# -ne –æ–∑–Ω–∞—á–∞–µ—Ç "not equal" (–Ω–µ —Ä–∞–≤–Ω–æ)
if [ $? -ne 0 ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!"
    exit 1  # –í—ã—Ö–æ–¥ —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏
fi

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
COMMAND_FILE="commandsGauss.txt"
if [ ! -f "$COMMAND_FILE" ]; then  # ! -f –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ñ–∞–π–ª –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    echo "‚ùå –§–∞–π–ª –∫–æ–º–∞–Ω–¥ $COMMAND_FILE –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    echo "–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª commands.txt —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã"
    exit 1
fi

# 3. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤–≤–æ–¥–æ–º –¥–∞–Ω–Ω—ã—Ö
echo "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –∫–æ–º–∞–Ω–¥–Ω—ã–º —Ñ–∞–π–ª–æ–º..."
# echo -e –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã (\n - –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞)
# | –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–≤–æ–¥ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É –∫–∞–∫ –≤–≤–æ–¥
echo -e "0\n$COMMAND_FILE" | ./terrain_navigator

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
if [ $? -eq 0 ]; then  # -eq –æ–∑–Ω–∞—á–∞–µ—Ç "equal" (—Ä–∞–≤–Ω–æ)
    echo "‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
    echo "üìÅ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ø–∞–ø–∫–µ Result/"
else
    echo "‚ùå –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π"
    echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ commands.txt –∏ –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"
fi
